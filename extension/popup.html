<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ars0n Manual Crawling</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container-fluid p-0">
    <div class="header">
      <h5 class="mb-0">
        <i class="bi bi-fire text-danger"></i>
        <span class="text-danger">Ars0n</span> Framework
      </h5>
      <small class="text-muted">Manual Crawling Extension</small>
    </div>

    <div class="content p-3">
      <div id="connectionStatus" class="alert alert-info mb-3 d-none">
        <i class="bi bi-info-circle-fill me-2"></i>
        <span id="connectionMessage">Checking connection...</span>
      </div>

      <div id="errorAlert" class="alert alert-danger mb-3 d-none">
        <i class="bi bi-exclamation-triangle-fill me-2"></i>
        <span id="errorMessage"></span>
      </div>

      <div class="card shadow-sm mb-3">
        <div class="card-body">
          <h6 class="card-title text-danger mb-3">
            <i class="bi bi-globe2"></i> Target Configuration
          </h6>
          
          <div class="mb-3">
            <label for="targetSelect" class="form-label small">Target</label>
            <select class="form-control form-control-sm" id="targetSelect">
              <option value="">Loading targets...</option>
            </select>
            <small class="text-muted">Select a URL target from your framework</small>
          </div>

          <div class="form-check form-switch mb-2">
            <input class="form-check-input" type="checkbox" id="includeSubdomains" checked>
            <label class="form-check-label small" for="includeSubdomains">
              Include Subdomains
            </label>
          </div>

          <div class="form-check form-switch mb-2">
            <input class="form-check-input" type="checkbox" id="captureStatic">
            <label class="form-check-label small" for="captureStatic">
              Capture Static Assets
            </label>
          </div>
        </div>
      </div>

      <div class="card shadow-sm mb-3">
        <div class="card-body">
          <h6 class="card-title text-danger mb-3">
            <i class="bi bi-activity"></i> Capture Status
          </h6>
          
          <div class="d-flex justify-content-between align-items-center mb-2">
            <span class="small">Status:</span>
            <span id="captureStatus" class="badge bg-secondary">Idle</span>
          </div>

          <div class="d-flex justify-content-between align-items-center mb-2">
            <span class="small">Requests Captured:</span>
            <span id="requestCount" class="badge bg-info">0</span>
          </div>

          <div class="d-flex justify-content-between align-items-center mb-3">
            <span class="small">Unique Endpoints:</span>
            <span id="endpointCount" class="badge bg-success">0</span>
          </div>

          <div class="progress mb-2" style="height: 5px;">
            <div id="progressBar" class="progress-bar bg-danger" role="progressbar" style="width: 0%"></div>
          </div>
        </div>
      </div>

      <div class="d-grid gap-2">
        <button id="startCaptureBtn" class="btn btn-danger">
          <i class="bi bi-play-circle-fill me-2"></i>
          Start Capture
        </button>
        <button id="stopCaptureBtn" class="btn btn-outline-danger d-none">
          <i class="bi bi-stop-circle-fill me-2"></i>
          Stop Capture
        </button>
      </div>

      <div class="mt-3">
        <button id="openFrameworkBtn" class="btn btn-outline-secondary btn-sm w-100">
          <i class="bi bi-box-arrow-up-right me-2"></i>
          Open Ars0n Framework
        </button>
      </div>

      <div class="mt-3 d-flex justify-content-between align-items-center">
        <button id="toggleSettingsBtn" class="btn btn-outline-secondary btn-sm flex-grow-1">
          <i class="bi bi-gear-fill me-2"></i>
          Connection Settings
        </button>
        <span id="connectionIndicator" class="ms-3 small">
          <i class="bi bi-circle-fill text-secondary"></i>
          <span id="connectionText">Checking...</span>
        </span>
      </div>

      <div id="settingsPanel" class="mt-3 d-none">
        <div class="card shadow-sm">
          <div class="card-body">
            <h6 class="card-title text-danger mb-3">
              <i class="bi bi-server"></i> Framework Connection
            </h6>
            
            <div class="mb-3">
              <label for="frameworkUrl" class="form-label small">Framework API URL</label>
              <input 
                type="text" 
                class="form-control form-control-sm" 
                id="frameworkUrl" 
                placeholder="http://localhost"
              >
              <small class="text-muted">URL where the Ars0n Framework is running (nginx proxies to backend)</small>
            </div>

            <button id="saveSettingsBtn" class="btn btn-danger btn-sm w-100">
              <i class="bi bi-check-circle-fill me-2"></i>
              Save Settings
            </button>
          </div>
        </div>
      </div>
    </div>

    <div class="footer">
      <small class="text-muted">
        <i class="bi bi-shield-check"></i> 
        v1.0.0 | 
        <a href="#" id="helpLink" class="text-decoration-none">Help</a>
      </small>
    </div>
  </div>

  <script src="popup.js"></script>
</body>
</html>
